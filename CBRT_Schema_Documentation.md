# CBRT UI - Complete Database Schema Documentation

## Overview
Cincinnati Barge & Rail Terminal (CBRT) Warehouse Management System database schema for Firestore collections.

**Generated:** August 21, 2025  
**System:** React + Vite + Firebase/Firestore  
**Purpose:** Warehouse operations, inventory tracking, BOL generation, and release management

---

## Field Naming Conventions

The system handles both **camelCase** and **PascalCase** field naming for backwards compatibility:
- **New/Preferred:** camelCase (e.g., `customerName`, `itemCode`)
- **Legacy:** PascalCase (e.g., `CustomerName`, `ItemCode`)
- **Import fields:** Often use original CSV naming preserved in `original*` fields

---

## Core Collections

### 1. **suppliers**
Supplier/vendor companies that provide materials.

```typescript
{
  id: string,                    // Firestore document ID
  supplierName: string,          // Company name (camelCase)
  SupplierName?: string,         // Legacy field (PascalCase)
  bolPrefix: string,             // BOL prefix for identification (e.g., "YAS", "TRX")
  BOLPrefix?: string,            // Legacy field
  contactName?: string,          // Primary contact person
  phone?: string,                // Contact phone number
  email?: string,                // Contact email
  address?: string,              // Company address
  status: 'Active' | 'Inactive', // Operational status
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

**Key Relationships:**
- Connected to `barcodes` via `bolPrefix`/`BOLPrefix`
- Connected to `barges` via supplier linking
- Used in release workflows for supplier selection

---

### 2. **customers**
Customer companies that receive materials.

```typescript
{
  id: string,                    // Firestore document ID
  customerName: string,          // Company name (camelCase)
  CustomerName?: string,         // Legacy field (PascalCase)
  companyName?: string,          // Alternative company name field
  contactName?: string,          // Primary contact person
  phone?: string,                // Contact phone number
  email?: string,                // Contact email
  address?: string,              // Company address
  status: 'Active' | 'Inactive', // Operational status
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

**Key Relationships:**
- Connected to `barcodes` via `customerName`
- Used in release workflows for customer selection
- Filtered by supplier relationships in release entry

---

### 3. **items**
Inventory items/products that can be tracked and released.

```typescript
{
  id: string,                    // Firestore document ID
  itemCode: string,              // Unique item identifier (camelCase)
  ItemCode?: string,             // Legacy field (PascalCase)
  itemName: string,              // Descriptive item name (camelCase)
  ItemName?: string,             // Legacy field (PascalCase)
  originalItemCode?: string,     // Original CSV import value
  originalItemName?: string,     // Original CSV import value
  status: 'Active' | 'Inactive', // Operational status
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

**Key Relationships:**
- Connected to `barcodes` via `itemCode`
- Related to `sizes` through barcode associations
- Used in release line items

---

### 4. **sizes**
Size variations for items (e.g., "6X16", "12X24").

```typescript
{
  id: string,                    // Firestore document ID
  sizeName: string,              // Size identifier (camelCase, e.g., "6X16")
  SizeName?: string,             // Legacy field (PascalCase)
  originalSizeName?: string,     // Original CSV import value
  sortOrder: 'ascending' | 'descending', // Sort preference
  status: 'Active' | 'Inactive', // Operational status
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

**Key Relationships:**
- Connected to `barcodes` via `sizeName`
- Associated with `items` through barcodes
- Used in release size selection (conditionally required)

---

### 5. **lots**
Lot numbers for inventory batching and tracking.

```typescript
{
  id: string,                    // Firestore document ID
  lotNumber: string,             // Lot identifier (camelCase)
  LotNumber?: string,            // Legacy field (PascalCase)
  itemCode: string,              // Associated item code
  originalLotNumber?: string,    // Original CSV import value
  status: 'Active' | 'Inactive', // Operational status
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

**Key Relationships:**
- Connected to `barcodes` via `lotNumber`
- Associated with specific `items` via `itemCode`
- Optional field in release entry

---

### 6. **barges**
Barge vessels that transport materials.

```typescript
{
  id: string,                    // Firestore document ID
  bargeName: string,             // Barge identifier (camelCase)
  BargeName?: string,            // Legacy field (PascalCase)
  bargeNumber?: string,          // Alternative identifier
  name?: string,                 // Alternative name field
  originalBargeName?: string,    // Original CSV import value
  supplierName: string,          // Associated supplier name
  SupplierName?: string,         // Legacy field
  supplierId: string,            // Supplier document reference
  SupplierId?: string,           // Legacy field
  bolPrefix: string,             // BOL prefix from supplier
  arrivalDate?: string,          // Expected/actual arrival date (optional)
  ArrivalDate?: string,          // Legacy field
  status: 'Expected' | 'Working' | 'Completed' | 'Active', // Operational status
  Status?: string,               // Legacy field
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

**Key Relationships:**
- Connected to `suppliers` via `supplierId` and `bolPrefix`
- Referenced in `barcodes` via `bargeName`
- Set during data import process

---

### 7. **barcodes** ‚≠ê
**Central collection** linking all inventory data together.

```typescript
{
  id: string,                    // Firestore document ID
  barcode: string,               // Generated barcode value (concatenated)
  
  // Core item identification
  itemCode: string,              // Item identifier (camelCase)
  itemName: string,              // Item description (camelCase)
  sizeName: string,              // Size identifier (camelCase)
  lotNumber: string,             // Lot identifier (camelCase)
  bargeName: string,             // Barge identifier (camelCase)
  barcodeIdentifier: string,     // Additional barcode component (camelCase)
  
  // Original CSV values (preserved for reference)
  originalItemCode?: string,     // Original import value
  originalItemName?: string,     // Original import value
  originalSizeName?: string,     // Original import value
  originalLotNumber?: string,    // Original import value
  originalBargeName?: string,    // Original import value
  originalBarcodeIdentifier?: string, // Original import value
  
  // Business relationships
  customerName: string,          // Customer company name
  CustomerName?: string,         // Legacy field
  customerId?: string,           // Customer document reference
  supplierName: string,          // Supplier company name
  SupplierName?: string,         // Legacy field
  supplierId?: string,           // Supplier document reference
  BOLPrefix: string,             // BOL prefix for supplier matching
  bolPrefix?: string,            // Alternative field
  
  // Inventory data
  quantity: number,              // Available quantity (default: 1)
  standardWeight?: number,       // Weight per unit
  
  // Status tracking
  status: 'Active' | 'Available', // Inventory status
  Status?: string,               // Legacy field
  
  // Timestamps
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

**Barcode Generation Formula:**
```
barcode = bargeName + itemCode + lotNumber + barcodeIdentifier + sizeName
```

**Key Relationships:**
- **Central hub** connecting all other collections
- Links `suppliers` via `BOLPrefix`/`supplierName`
- Links `customers` via `customerName`
- Links `items` via `itemCode`
- Links `sizes` via `sizeName`
- Links `lots` via `lotNumber`
- Links `barges` via `bargeName`

---

### 8. **staff**
Warehouse staff members for notifications and assignments.

```typescript
{
  id: string,                    // Firestore document ID
  name: string,                  // Staff member name
  phone?: string,                // Phone number for SMS notifications
  email?: string,                // Email address
  role?: string,                 // Job role/title
  receivesNewRelease: boolean,   // Gets notified of new releases
  status: 'Active' | 'Inactive', // Employment status
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

**Key Relationships:**
- Used for SMS notifications in release workflow
- Filtered for active staff with phone numbers

---

### 9. **carriers**
Transportation companies for shipment delivery.

```typescript
{
  id: string,                    // Firestore document ID
  carrierName: string,           // Company name (camelCase)
  CarrierName?: string,          // Legacy field (PascalCase)
  contactName?: string,          // Primary contact person
  phone?: string,                // Contact phone number
  email?: string,                // Contact email
  dotNumber?: string,            // DOT registration number
  mcNumber?: string,             // MC registration number
  status: 'Active' | 'Inactive', // Operational status
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

---

### 10. **trucks**
Delivery vehicles for transportation.

```typescript
{
  id: string,                    // Firestore document ID
  truckNumber: string,           // Truck identifier
  carrierId?: string,            // Associated carrier reference
  licensePlate?: string,         // Vehicle license plate
  driverName?: string,           // Current driver name
  capacity?: number,             // Load capacity
  status: 'Active' | 'Inactive' | 'In Transit' | 'Maintenance', // Operational status
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

---

### 11. **releases** ‚≠ê
**Primary workflow collection** for material release orders.

```typescript
{
  id: string,                    // Firestore document ID
  ReleaseNumber: string,         // Unique release identifier
  SupplierId: string,            // Selected supplier reference
  CustomerId: string,            // Selected customer reference
  PickupDate?: string,           // Scheduled pickup date (optional)
  
  // Line items for release
  LineItems: Array<{
    ItemId: string,              // Selected item reference
    SizeId?: string,             // Selected size reference (conditional)
    LotId?: string,              // Selected lot reference (optional)
    Quantity: number,            // Requested quantity
    // Calculated fields populated during submission:
    itemName?: string,           // Item description
    itemCode?: string,           // Item code
    sizeName?: string,           // Size name
    lotNumber?: string           // Lot number
  }>,
  
  // Calculated totals
  TotalItems: number,            // Sum of all line item quantities
  TotalWeight: number,           // Calculated weight (TotalItems * 2200)
  
  // Workflow status
  Status: 'Entered' | 'Staged' | 'Verified' | 'Loaded' | 'Complete',
  
  // Audit fields
  CreatedAt: Date,               // Release creation timestamp
  CreatedBy: string,             // User who created (default: 'Office')
  UpdatedAt?: Date,              // Last modification timestamp
  UpdatedBy?: string             // Last user to modify
}
```

**Workflow States:**
1. **Entered** - Initial state after creation
2. **Staged** - Items prepared for pickup
3. **Verified** - Quantities and items confirmed
4. **Loaded** - Items loaded onto transport
5. **Complete** - Release fulfilled

---

### 12. **products** (Optional/Legacy)
Legacy product definitions - may be superseded by items collection.

```typescript
{
  id: string,                    // Firestore document ID
  productCode?: string,          // Product identifier
  productName?: string,          // Product description
  category?: string,             // Product category
  status: 'Active' | 'Inactive', // Operational status
  createdAt: Date,               // Record creation timestamp
  updatedAt: Date                // Last modification timestamp
}
```

---

## Data Import Process

### CSV Import Flow
1. **Parse CSV** with expected columns:
   - `itemCode`, `itemName`, `sizeName`, `bargeName`
   - `lotNumber`, `barcodeIdentifier`, `customerName`
   - `BOLPrefix`, `quantity`, `standardWeight`

2. **Normalization** applied to all fields:
   - Remove spaces: `replace(/\s+/g, '')`
   - Convert backslashes: `replace(/\\/g, '/')`
   - Convert to uppercase: `toUpperCase()`
   - Trim whitespace: `trim()`

3. **Entity Creation** (deduplicated):
   - Create unique `sizes` from `sizeName`
   - Create unique `items` from `itemCode` + `itemName`
   - Create unique `lots` from `lotNumber` + `itemCode`
   - Create unique `barges` with supplier linkage
   - Create `barcodes` linking all entities

4. **Supplier/Customer Linking**:
   - Match suppliers by `BOLPrefix`
   - Match customers by `customerName`
   - Store both IDs and names in barcodes

---

## Business Rules

### Release Entry Logic
1. **Supplier Selection** ‚Üí Filters customers by barcode relationships
2. **Customer Selection** ‚Üí Enables item selection
3. **Item Selection** ‚Üí Auto-populates sizes if available
4. **Size Selection** ‚Üí Conditionally required based on availability
5. **Lot Selection** ‚Üí Always optional
6. **Quantity Validation** ‚Üí Checked against barcode availability

### Field Requirements
- **Size Field**: Required only if sizes are available for selected item
- **Lot Field**: Always optional
- **Auto-selection**: Single-option dropdowns auto-select
- **Empty Dropdowns**: Show "None available" when no options

### Availability Calculation
```typescript
// Pseudocode for availability calculation
function calculateAvailability(supplierId, customerId, itemId, sizeId?, lotId?) {
  const supplier = findSupplier(supplierId);
  const customer = findCustomer(customerId);
  const item = findItem(itemId);
  
  let barcodes = filterBarcodes({
    bolPrefix: supplier.bolPrefix,
    customerName: customer.customerName,
    itemCode: item.itemCode,
    status: 'Active' || 'Available'
  });
  
  if (sizeId) {
    const size = findSize(sizeId);
    barcodes = barcodes.filter(b => b.sizeName === size.sizeName);
  }
  
  if (lotId) {
    const lot = findLot(lotId);
    barcodes = barcodes.filter(b => b.lotNumber === lot.lotNumber);
  }
  
  return barcodes.reduce((sum, b) => sum + (b.quantity || 1), 0);
}
```

---

## System Architecture Notes

### Authentication
- Uses Firebase Anonymous Authentication
- No user accounts or permissions currently implemented

### Real-time Updates
- Firestore real-time listeners via `useFirestoreCollection` hook
- Automatic UI updates when data changes

### Data Consistency
- Handles both camelCase and PascalCase throughout system
- Original import values preserved in `original*` fields
- Normalization applied consistently during import

### Performance Considerations
- Collections optimized for real-time queries
- Barcodes collection is central hub but may need indexing for large datasets
- Consider pagination for large collections

---

## Migration Notes

### From Legacy System
- PascalCase fields maintained for backwards compatibility
- Gradual migration to camelCase preferred
- Import process handles field name variations

### Future Enhancements
- Consider adding indexes for frequently queried fields
- May need user authentication and permissions
- Could benefit from batch operations for large imports

---

## Project File Structure

### üìÅ **Root Configuration**
```
/Users/cerion/CBRT_UI/
‚îú‚îÄ‚îÄ package.json              # Main project dependencies & scripts
‚îú‚îÄ‚îÄ package-lock.json         # Dependency lock file
‚îú‚îÄ‚îÄ vite.config.js            # Vite build configuration
‚îú‚îÄ‚îÄ tailwind.config.js        # Tailwind CSS configuration
‚îú‚îÄ‚îÄ postcss.config.js         # PostCSS configuration
‚îú‚îÄ‚îÄ eslint.config.js          # ESLint configuration
‚îú‚îÄ‚îÄ firebase.json             # Firebase project configuration
‚îú‚îÄ‚îÄ firestore.json            # Firestore rules and indexes
‚îú‚îÄ‚îÄ cors.json                 # CORS configuration
‚îú‚îÄ‚îÄ .firebaserc               # Firebase project aliases
‚îú‚îÄ‚îÄ .env.example              # Environment variables template
‚îú‚îÄ‚îÄ .env.local                # Local environment variables
‚îî‚îÄ‚îÄ README.md                 # Project documentation
```

### üìÅ **Source Code Structure (`/src/`)**

#### **Main Application**
```
src/
‚îú‚îÄ‚îÄ main.jsx                  # Application entry point
‚îú‚îÄ‚îÄ App.jsx                   # Root React component with routing
‚îî‚îÄ‚îÄ index.css                 # Global styles
```

#### **Core Components (`/src/components/`)**
```
components/
‚îú‚îÄ‚îÄ LoadingStates.jsx         # Loading, error, empty state components
‚îú‚îÄ‚îÄ Manager.jsx               # Base manager component template
‚îú‚îÄ‚îÄ PageHeader.jsx            # Common page header component
‚îú‚îÄ‚îÄ Icons.jsx                 # SVG icon components
‚îú‚îÄ‚îÄ BOLPreview.jsx            # Bill of Lading preview component
‚îú‚îÄ‚îÄ WarehouseAuth.jsx         # Warehouse authentication component
‚îú‚îÄ‚îÄ FirebaseLogin.jsx         # Firebase authentication component
‚îú‚îÄ‚îÄ LoginComponent.jsx        # General login component
‚îú‚îÄ‚îÄ InventoryAvailabilityTest.jsx  # Inventory testing component
‚îú‚îÄ‚îÄ QuickSystemCheck.jsx      # System health check component
‚îú‚îÄ‚îÄ TestAnalysisDashboard.jsx # Testing dashboard component
‚îú‚îÄ‚îÄ AnalysisHistory.jsx       # Analysis history display
‚îú‚îÄ‚îÄ NotificationPanel.jsx     # Notification management
‚îú‚îÄ‚îÄ ConflictResolutionDialog.jsx  # Data conflict resolution
‚îú‚îÄ‚îÄ IntegrationConfigPanel.jsx     # Integration configuration
‚îú‚îÄ‚îÄ IntegrationHealthPanel.jsx     # Integration health monitoring
‚îú‚îÄ‚îÄ IntegrationManager.jsx         # Integration management
‚îî‚îÄ‚îÄ WorkflowChainBuilder.jsx       # Workflow chain builder
```

#### **Business Logic Routes (`/src/routes/`)**
```
routes/
‚îú‚îÄ‚îÄ Home.jsx                  # Dashboard/landing page
‚îú‚îÄ‚îÄ NewRelease.jsx           # ‚≠ê Release entry form (main workflow)
‚îú‚îÄ‚îÄ Releases.jsx             # Release list view
‚îú‚îÄ‚îÄ ReleaseDetails.jsx       # Individual release details
‚îú‚îÄ‚îÄ ReleaseWorkflowDashboard.jsx  # Workflow management dashboard
‚îú‚îÄ‚îÄ ExpectedShipments.jsx    # Shipment expectations view
‚îú‚îÄ‚îÄ WarehouseApp.jsx         # Main warehouse application
‚îú‚îÄ‚îÄ WarehouseStaging.jsx     # Legacy warehouse staging
‚îú‚îÄ‚îÄ WarehouseStagingNew.jsx  # New warehouse staging workflow
‚îú‚îÄ‚îÄ WarehouseVerification.jsx     # Legacy verification
‚îú‚îÄ‚îÄ WarehouseVerificationNew.jsx  # New verification workflow
‚îú‚îÄ‚îÄ ShipmentLoading.jsx      # Shipment loading workflow
‚îú‚îÄ‚îÄ PDFTestPage.jsx          # PDF generation testing
‚îî‚îÄ‚îÄ UmsExplorer.jsx          # UMS system explorer (feature-flagged)
```

#### **Data Management (`/src/managers/`)**
```
managers/
‚îú‚îÄ‚îÄ StaffManager.jsx         # Staff/employee management
‚îú‚îÄ‚îÄ CustomerManager.jsx      # Customer management
‚îú‚îÄ‚îÄ SupplierManager.jsx      # Supplier management
‚îú‚îÄ‚îÄ CarrierManager.jsx       # Transportation carrier management
‚îú‚îÄ‚îÄ TruckManager.jsx         # Vehicle management
‚îú‚îÄ‚îÄ ItemManager.jsx          # Inventory item management
‚îú‚îÄ‚îÄ SizeManager.jsx          # Item size management
‚îú‚îÄ‚îÄ ProductManager.jsx       # Product definition management
‚îú‚îÄ‚îÄ BargeManager.jsx         # Barge vessel management
‚îú‚îÄ‚îÄ LotManager.jsx           # Inventory lot management
‚îú‚îÄ‚îÄ BarcodeManager.jsx       # Barcode management
‚îî‚îÄ‚îÄ BOLManager.jsx           # Bill of Lading management
```

#### **Modal Components (`/src/modals/`)**
```
modals/
‚îú‚îÄ‚îÄ Modal.jsx                # Base modal component
‚îú‚îÄ‚îÄ StaffModal.jsx           # Staff creation/edit modal
‚îú‚îÄ‚îÄ CustomerModal.jsx        # Customer creation/edit modal
‚îú‚îÄ‚îÄ SupplierModal.jsx        # Supplier creation/edit modal
‚îú‚îÄ‚îÄ CarrierModal.jsx         # Carrier creation/edit modal
‚îú‚îÄ‚îÄ TruckModal.jsx           # Truck creation/edit modal
‚îú‚îÄ‚îÄ ItemModal.jsx            # Item creation/edit modal
‚îú‚îÄ‚îÄ SizeModal.jsx            # Size creation/edit modal
‚îú‚îÄ‚îÄ ProductModal.jsx         # Product creation/edit modal
‚îú‚îÄ‚îÄ BargeModal.jsx           # Barge creation/edit modal
‚îú‚îÄ‚îÄ LotModal.jsx             # Lot creation/edit modal
‚îî‚îÄ‚îÄ BarcodeModal.jsx         # Barcode creation/edit modal
```

#### **Business Services (`/src/services/`)**
```
services/
‚îú‚îÄ‚îÄ auth-client.js                    # Authentication client service
‚îú‚îÄ‚îÄ firebaseService.js                # Firebase utilities
‚îú‚îÄ‚îÄ bolService.js                     # Bill of Lading business logic
‚îú‚îÄ‚îÄ bolPDFService.js                  # BOL PDF generation
‚îú‚îÄ‚îÄ pickTicketService.js              # Pick ticket generation
‚îú‚îÄ‚îÄ smsService.js                     # SMS notification service
‚îú‚îÄ‚îÄ inventoryAvailabilityService.js   # Inventory availability calculation
‚îú‚îÄ‚îÄ releaseWorkflowService.js         # Release workflow management
‚îú‚îÄ‚îÄ releaseNotificationService.js     # Release notifications
‚îú‚îÄ‚îÄ dataValidationService.js          # Data validation utilities
‚îú‚îÄ‚îÄ duplicateDetectionService.js      # Duplicate detection logic
‚îú‚îÄ‚îÄ systemMonitoringService.js        # System health monitoring
‚îî‚îÄ‚îÄ testAnalysisService.js            # Test analysis utilities
```

#### **React Hooks (`/src/hooks/`)**
```
hooks/
‚îú‚îÄ‚îÄ useFirestore.js                   # Firestore data fetching hook
‚îú‚îÄ‚îÄ useInventoryAvailability.js       # Inventory availability hook
‚îî‚îÄ‚îÄ useTrucksWithCarriers.js          # Truck-carrier relationship hook
```

#### **Context Providers (`/src/contexts/`)**
```
contexts/
‚îú‚îÄ‚îÄ AuthContext.jsx                   # Authentication context
‚îî‚îÄ‚îÄ SimpleAuthContext.jsx             # Simplified auth context
```

#### **Utility Functions (`/src/utils/`)**
```
utils/
‚îú‚îÄ‚îÄ index.js                          # General utilities
‚îú‚îÄ‚îÄ logger.js                         # Logging utilities
‚îú‚îÄ‚îÄ workflowMonitor.js                # Workflow monitoring
‚îú‚îÄ‚îÄ transactionHelper.js              # Database transaction helpers
‚îú‚îÄ‚îÄ clearFirestore.js                 # Database cleanup utilities
‚îú‚îÄ‚îÄ quickWarehouseSetup.js            # Warehouse setup automation
‚îú‚îÄ‚îÄ testSMSSetup.js                   # SMS testing setup
‚îî‚îÄ‚îÄ mvpSMSTest.js                     # MVP SMS testing
```

#### **Constants (`/src/constants/`)**
```
constants/
‚îú‚îÄ‚îÄ index.js                          # General constants
‚îî‚îÄ‚îÄ logo.js                           # Logo/branding constants
```

#### **Specialized Features (`/src/features/`)**
```
features/
‚îî‚îÄ‚îÄ bol-generation/
    ‚îú‚îÄ‚îÄ BOLGenerator.jsx              # BOL generation component
    ‚îî‚îÄ‚îÄ bolManager.jsx                # BOL management logic
```

#### **Testing Suite (`/src/tests/`)**
```
tests/
‚îú‚îÄ‚îÄ WorkflowAutomatedTest.jsx         # Automated workflow testing
‚îú‚îÄ‚îÄ WorkflowCompleteE2ETest.jsx       # End-to-end workflow tests
‚îú‚îÄ‚îÄ WorkflowStressTest.jsx            # Stress testing component
‚îú‚îÄ‚îÄ ContinuousChaosTest.jsx           # Chaos testing component
‚îú‚îÄ‚îÄ E2IntegrationTests.js             # Integration test suite
‚îú‚îÄ‚îÄ E2WorkflowBenchmarks.js           # Performance benchmarks
‚îî‚îÄ‚îÄ run-d5-validation.js              # D5 validation runner
```

#### **Data Management (`/src/pages/`)**
```
pages/
‚îî‚îÄ‚îÄ DataImportManager.jsx             # CSV import management
```

### üìÅ **Firebase Functions (`/functions/`)**
```
functions/
‚îú‚îÄ‚îÄ package.json                      # Functions dependencies
‚îú‚îÄ‚îÄ package-lock.json                 # Functions dependency lock
‚îú‚îÄ‚îÄ index.js                          # Cloud Functions entry point
‚îú‚îÄ‚îÄ .eslintrc.js                      # Functions ESLint config
‚îî‚îÄ‚îÄ tsconfig.json                     # TypeScript configuration
```

### üìÅ **Documentation (`/docs/`)**
```
docs/
‚îú‚îÄ‚îÄ D5_VALIDATION_REPORT.md           # Validation testing report
‚îú‚îÄ‚îÄ E1_COLLABORATION_REPORT.md        # Collaboration analysis
‚îú‚îÄ‚îÄ E1_GOVERNANCE_POLICIES.md         # Governance documentation
‚îú‚îÄ‚îÄ E2_API_REFERENCE.md               # API reference documentation
‚îú‚îÄ‚îÄ E2_COLLABORATION_WORKFLOWS_REPORT.md  # Workflow analysis
‚îú‚îÄ‚îÄ dev/
‚îÇ   ‚îî‚îÄ‚îÄ FIRESTORE_AUDIT.md            # Database audit documentation
‚îî‚îÄ‚îÄ integration/
    ‚îî‚îÄ‚îÄ UMS_GRAPH.md                  # UMS integration graph
```

### üìÅ **Development Tools & Scripts**
```
/
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ firestore_bulk_seed.js        # Database seeding script
‚îÇ   ‚îú‚îÄ‚îÄ firestoreSchema.js            # Schema generation script
‚îÇ   ‚îî‚îÄ‚îÄ normalizeFirestore.js         # Data normalization script
‚îú‚îÄ‚îÄ audit/
‚îÇ   ‚îú‚îÄ‚îÄ firestore_audit.json          # Audit results
‚îÇ   ‚îú‚îÄ‚îÄ collections.map.json          # Collection mapping
‚îÇ   ‚îî‚îÄ‚îÄ README.md                     # Audit documentation
‚îú‚îÄ‚îÄ generate_manager.js               # Manager component generator
‚îú‚îÄ‚îÄ temp_import.js                    # Temporary import script
‚îî‚îÄ‚îÄ check-field-naming.mjs            # Field naming validation
```

### üìÅ **Development Configuration**
```
.vscode/
‚îî‚îÄ‚îÄ settings.json                     # VS Code workspace settings

.claude/
‚îî‚îÄ‚îÄ settings.local.json               # Claude Code local settings

.github/workflows/
‚îú‚îÄ‚îÄ ci.yml                           # Continuous integration
‚îî‚îÄ‚îÄ deploy.yml                       # Deployment automation
```

### üìÅ **Build Output**
```
dist/                                # Production build output (auto-generated)
public/                              # Static assets
```

---

## Key Architectural Patterns

### **Component Organization**
- **Managers**: CRUD operations for each entity type
- **Modals**: Form components for create/edit operations  
- **Routes**: Page-level components with business logic
- **Services**: Reusable business logic and API interactions
- **Hooks**: Custom React hooks for data fetching and state management

### **File Naming Conventions**
- **Components**: PascalCase (e.g., `CustomerManager.jsx`)
- **Services**: camelCase (e.g., `inventoryAvailabilityService.js`)
- **Utilities**: camelCase (e.g., `workflowMonitor.js`)
- **Constants**: camelCase (e.g., `index.js`)

### **Import Patterns**
```javascript
// React imports
import React, { useState, useEffect } from 'react';

// External libraries
import { collection, addDoc } from 'firebase/firestore';

// Internal utilities
import { useFirestoreCollection } from '../hooks/useFirestore';
import { db } from '../firebase/config';

// Components
import Modal from '../modals/Modal';
```

### **State Management**
- **Local State**: React `useState` for component-specific data
- **Global State**: React Context for authentication
- **Server State**: Custom Firestore hooks with real-time updates
- **Form State**: Direct state management in modal components

### **Data Flow**
```
Firestore Database
       ‚Üì
useFirestoreCollection Hook
       ‚Üì
Manager Components
       ‚Üì
Modal Components
       ‚Üì
Form Submission
       ‚Üì
Service Layer
       ‚Üì
Firestore Database
```

---

**Document Version:** 1.1  
**Last Updated:** August 21, 2025  
**Maintained By:** CBRT Development Team